{% extends "orders/base.html" %}

{% block title %}Lista de rdenes - PROVESI SAS{% endblock %}
{% block header_title %}Gesti贸n de rdenes{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
    <p style="color: #666; margin: 0;">Total: <strong>{{ orders|length }}</strong> 贸rdenes</p>
    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
        <a href="{% url 'client-list' %}" class="btn btn-secondary"> Clientes</a>
        <a href="{% url 'returns-list' %}" class="btn btn-warning" style="background-color: #ffc107; color: #212529;">
             Devoluciones {% if returns_count > 0 %}({{ returns_count }}){% endif %}
        </a>
        <a href="{% url 'order-lookup' %}" class="btn btn-secondary"> Buscar</a>
        <a href="{% url 'order-create' %}" class="btn btn-success">+ Nueva Orden</a>
    </div>
</div>

{% if orders %}
    <table>
        <thead>
            <tr>
                <th>C贸digo</th>
                <th>Cliente</th>
                <th>Estado</th>
                <th>ltima Actualizaci贸n</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td data-label="C贸digo">
                    <strong>{{ order.order_number }}</strong>
                </td>
                <td data-label="Cliente">
                    {% if order.client %}
                        <a href="{% url 'client-detail' order.client_id %}" style="color: #667eea; text-decoration: none;">
                            {{ order.client.name }}
                        </a>
                    {% else %}
                        <span style="color: #999;">Sin asignar</span>
                    {% endif %}
                </td>
                <td data-label="Estado">
                    <span class="status-badge status-{{ order.status }}">
                        {{ order.get_status_display }}
                    </span>
                </td>
                <td data-label="Actualizaci贸n" class="timestamp">
                    {{ order.updated_at|date:"d/m/Y H:i" }}
                </td>
                <td data-label="Acciones" class="actions">
                    <a href="{% url 'order-edit' order.order_number %}" class="btn btn-primary">Editar</a>
                    <a href="{% url 'order-delete' order.order_number %}" class="btn btn-danger">Eliminar</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <div class="empty-state">
        <p>No hay 贸rdenes registradas.</p>
        <a href="{% url 'order-create' %}" class="btn btn-success">Crear primera orden</a>
    </div>
{% endif %}
{% endblock %}